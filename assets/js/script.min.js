function resize(){var e,n,i=canvas.height/canvas.width,a=window.innerHeight/window.innerWidth;i>a?(n=window.innerHeight,e=n/i):(e=window.innerWidth,n=e*i),canvas.style.width=e+"px",canvas.style.height=n+"px"}function check(){numLoaded++;var e=Math.floor(numLoaded/n*100);$("#progress span").text(e.toString()),numLoaded>=n&&!loadedCalled&&(loadedCalled=!0,clearInterval(finished),loaded())}function loadImages(){for(var e=0;n>e;e++)img=new Image,img.onload=function(){check()},img.onerror=function(){console.log("ERROR: Couldn't load "+files[e])},img.src=frames+files[e],imgArr[e]=img}function preload(){$("#content").hide(),$("#status").show(),$.getJSON("files.php",function(e){"true"==e.success&&(n=e.length,frames=e.dir,files=e.files,finished=setInterval(check,1),loadImages())})}function loaded(){function e(){a=setTimeout(function(){i=requestAnimationFrame(e);var a=new Image;a=imgArr[o],ctx.drawImage(a,0,0,1280,720,0,0,canvas.width,canvas.height),o++,o>=n&&cancelAnimationFrame(i)},1e3/d)}resize(),$("#progress").hide(),$(".player_audio").prop("muted",!0),$(".player_audio").hide(),$("#content").show();var i,a,o=0,r=!1,t=0,d=7;$("#btnPlayPause").click(function(){return r?(cancelAnimationFrame(i),clearTimeout(a),$(".player_audio").trigger("pause"),r=!1):($("#canvasContainer").attr("style","background:none;"),i=requestAnimationFrame(e),$(".player_audio").trigger("play"),r=!0),!1}),$("#btnRewind").click(function(){return o=0,i=requestAnimationFrame(e),$(".player_audio").prop("currentTime",0),$(".player_audio").trigger("play"),r=!0,!1}),$("form").click(function(){$("#optionMusic0").is(":checked")&&(t=0,$(".player_audio").prop("muted",!0)),$("#optionMusic1").is(":checked")&&(t=1,$(".player_audio").prop("muted",!0),$("#audio1").prop("muted",!1)),$("#optionMusic2").is(":checked")&&(t=2,$(".player_audio").prop("muted",!0),$("#audio2").prop("muted",!1))})}var container=document.getElementById("container"),canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d");window.addEventListener("resize",resize,!1),resize();var frames,img,imgArr=new Array,files,finished=!1,loadedCalled=!1,i=1,n=0,numLoaded=0;preload();